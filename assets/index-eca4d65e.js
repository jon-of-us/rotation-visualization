var Ct=Object.defineProperty;var St=(e,t,n)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _=(e,t,n)=>(St(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function O(){}function Ot(e,t){for(const n in t)e[n]=t[n];return e}function Re(e){return e()}function Me(){return Object.create(null)}function ne(e){e.forEach(Re)}function b(e){return typeof e=="function"}function D(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function qt(e){return Object.keys(e).length===0}function Dt(e,...t){if(e==null){for(const r of t)r(void 0);return O}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ce(e,t,n){e.$$.on_destroy.push(Dt(t,n))}function Ie(e,t,n,r){if(e){const s=Ae(e,t,n,r);return e[0](s)}}function Ae(e,t,n,r){return e[1]&&r?Ot(n.ctx.slice(),e[1](r(t))):n.ctx}function Pe(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],u=Math.max(t.dirty.length,s.length);for(let a=0;a<u;a+=1)i[a]=t.dirty[a]|s[a];return i}return t.dirty|s}return t.dirty}function Ce(e,t,n,r,s,i){if(s){const u=Ae(t,n,r,i);e.p(u,s)}}function Se(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Z(e,t,n){return e.set(n),t}function kt(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function G(e){return document.createElement(e)}function Tt(e){return document.createTextNode(e)}function $(){return Tt(" ")}function c(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ue(e){return function(t){return t.preventDefault(),e.call(this,t)}}function P(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Vt(e){return Array.from(e.childNodes)}function Y(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function jt(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let te;function ee(e){te=e}function re(){if(!te)throw new Error("Function called outside component initialization");return te}function Oe(e){re().$$.on_mount.push(e)}function be(e){re().$$.on_destroy.push(e)}function Ft(){const e=re();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=jt(t,n,{cancelable:r});return s.slice().forEach(u=>{u.call(e,i)}),!i.defaultPrevented}return!0}}function Xt(e,t){return re().$$.context.set(e,t),t}function Yt(e){return re().$$.context.get(e)}function m(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const x=[],J=[];let H=[];const ve=[],Nt=Promise.resolve();let _e=!1;function Bt(){_e||(_e=!0,Nt.then(qe))}function he(e){H.push(e)}function Ee(e){ve.push(e)}const pe=new Set;let W=0;function qe(){if(W!==0)return;const e=te;do{try{for(;W<x.length;){const t=x[W];W++,ee(t),Wt(t.$$)}}catch(t){throw x.length=0,W=0,t}for(ee(null),x.length=0,W=0;J.length;)J.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];pe.has(n)||(pe.add(n),n())}H.length=0}while(x.length);for(;ve.length;)ve.pop()();_e=!1,pe.clear(),ee(e)}function Wt(e){if(e.fragment!==null){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(he)}}function Ut(e){const t=[],n=[];H.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),H=t}const le=new Set;let xt;function M(e,t){e&&e.i&&(le.delete(e),e.i(t))}function E(e,t,n,r){if(e&&e.o){if(le.has(e))return;le.add(e),xt.c.push(()=>{le.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Le(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function C(e){e&&e.c()}function z(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),he(()=>{const i=e.$$.on_mount.map(Re).filter(b);e.$$.on_destroy?e.$$.on_destroy.push(...i):ne(i),e.$$.on_mount=[]}),s.forEach(he)}function R(e,t){const n=e.$$;n.fragment!==null&&(Ut(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ht(e,t){e.$$.dirty[0]===-1&&(x.push(e),Bt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function T(e,t,n,r,s,i,u,a=[-1]){const l=te;ee(e);const h=e.$$={fragment:null,ctx:[],props:i,update:O,not_equal:s,bound:Me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Me(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};u&&u(h.root);let d=!1;if(h.ctx=n?n(e,t.props||{},(f,g,...w)=>{const y=w.length?w[0]:g;return h.ctx&&s(h.ctx[f],h.ctx[f]=y)&&(!h.skip_bound&&h.bound[f]&&h.bound[f](y),d&&Ht(e,f)),g}):[],h.update(),d=!0,ne(h.before_update),h.fragment=r?r(h.ctx):!1,t.target){if(t.hydrate){const f=Vt(t.target);h.fragment&&h.fragment.l(f),f.forEach(q)}else h.fragment&&h.fragment.c();t.intro&&M(e.$$.fragment),z(e,t.target,t.anchor),qe()}ee(l)}class V{constructor(){_(this,"$$");_(this,"$$set")}$destroy(){R(this,1),this.$destroy=O}$on(t,n){if(!b(n))return O;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!qt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kt);const U=[];function Gt(e,t){return{subscribe:De(e,t).subscribe}}function De(e,t=O){let n;const r=new Set;function s(a){if(D(e,a)&&(e=a,n)){const l=!U.length;for(const h of r)h[1](),U.push(h,e);if(l){for(let h=0;h<U.length;h+=2)U[h][0](U[h+1]);U.length=0}}}function i(a){s(a(e))}function u(a,l=O){const h=[a,l];return r.add(h),r.size===1&&(n=t(s,i)||O),a(e),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:u}}const j=De({slider1:0,slider2:0,mousePosition:{x:0,y:0},screenMiddle:{x:0,y:0},radius:0,angle:0});function Jt(e,t,n){let r;ce(e,j,i=>n(0,r=i));function s(i){Z(j,r.mousePosition.x=i.clientX,r),Z(j,r.mousePosition.y=i.clientY,r),Z(j,r.radius=Math.sqrt(Math.pow(r.screenMiddle.x-i.clientX,2)+Math.pow(r.screenMiddle.y-i.clientY,2)),r),Z(j,r.angle=Math.atan2(i.clientY-r.screenMiddle.y,i.clientX-r.screenMiddle.x),r)}return Oe(()=>{window.addEventListener("mousemove",s)}),be(()=>{window.removeEventListener("mousemove",s)}),[]}class Qt extends V{constructor(t){super(),T(this,t,Jt,null,D,{})}}function Zt(e){let t,n,r;return n=new Qt({}),{c(){t=G("div"),C(n.$$.fragment),P(t,"class","container svelte-uhtnsz")},m(s,i){k(s,t,i),z(n,t,null),r=!0},p:O,i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&q(t),R(n)}}}class $t extends V{constructor(t){super(),T(this,t,null,Zt,D,{})}}class en{constructor(){_(this,"currentLayerId");_(this,"setups");_(this,"renderers");_(this,"dispatchers");_(this,"needsSetup");_(this,"needsRedraw");_(this,"context");_(this,"width");_(this,"height");_(this,"autoclear");_(this,"pixelRatio");_(this,"renderLoop");_(this,"layerObserver");_(this,"layerRef");_(this,"layerSequence");_(this,"renderingLayerId");_(this,"activeLayerId");_(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:t,render:n,dispatcher:r}){return t&&(this.setups.set(this.currentLayerId,t),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.dispatchers.set(this.currentLayerId,r),this.needsRedraw=!0,this.currentLayerId++}unregister(t){this.renderers.delete(t),this.dispatchers.delete(t),this.needsRedraw=!0}setup(t,n){this.context=t,this.layerRef=n,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const t=[...this.layerRef.children];this.layerSequence=t.map(n=>+(n.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var i;const t=this.context,n=this.width,r=this.height,s=this.pixelRatio;if(this.needsSetup){for(const[u,a]of this.setups)a({context:t,width:n,height:r}),this.setups.delete(u);this.needsSetup=!1}if(this.needsRedraw){t.setTransform(s,0,0,s,0,0),this.autoclear&&t.clearRect(0,0,n,r);for(const u of this.layerSequence)this.renderingLayerId=u,(i=this.renderers.get(u))==null||i({context:t,width:n,height:r});this.needsRedraw=!1}}setActiveLayer(t,n){this.activeLayerId!==t&&(n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",n)),this.dispatchLayerEvent(new MouseEvent("mouseleave",n))),this.activeLayerId=t,this.activeLayerDispatcher=this.dispatchers.get(t),n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",n)),this.dispatchLayerEvent(new MouseEvent("mouseenter",n))))}dispatchLayerEvent(t){if(this.activeLayerDispatcher){if(window.TouchEvent&&t instanceof TouchEvent){const{left:n,top:r}=t.target.getBoundingClientRect(),{clientX:s,clientY:i}=t.changedTouches[0],u={x:s-n,y:i-r,originalEvent:t};this.activeLayerDispatcher(t.type,u)}else if(t instanceof MouseEvent){const n={x:t.offsetX,y:t.offsetY,originalEvent:t};this.activeLayerDispatcher(t.type,n)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const tn=e=>{const t=e*2,n=t>>16&255,r=t>>8&255,s=t&255;return`rgb(${n}, ${r}, ${s})`},nn=(e,t,n)=>{const r=(e<<16|t<<8|n)/2;return r%1?0:r},rn=["drawImage"],sn=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],on=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],an=e=>{let t;const n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0}),s=()=>{n.width=e.canvas.width,n.height=e.canvas.height};return new MutationObserver(s).observe(e.canvas,{attributeFilter:["width","height"]}),s(),new Proxy(e,{get(u,a){if(a==="_getLayerIdAtPixel")return(h,d)=>{const[f,g,w]=r.getImageData(h,d,1,1).data;return nn(f,g,w)};const l=u[a];return typeof l!="function"?l:function(...h){if(on.includes(a)){const d=tn(t());r.fillStyle=d,r.strokeStyle=d}if(a==="drawImage"){const d=h.slice(1);r.fillRect(...d)}return rn.includes(a)||Reflect.apply(l,r,h),Reflect.apply(l,u,h)}},set(u,a,l){return a==="_renderingLayerId"?(t=l,!0):(u[a]=l,sn.includes(a)||(r[a]=l),!0)}})};function un(e){let t,n,r,s=`${e[0]}px`,i=`${e[1]}px`,u,a,l,h,d;const f=e[18].default,g=Ie(f,e,e[17],null);return{c(){t=G("canvas"),u=$(),a=G("div"),g&&g.c(),P(t,"width",n=e[0]*e[5]),P(t,"height",r=e[1]*e[5]),P(t,"class",e[4]),P(t,"style",e[2]),Y(t,"display","block"),Y(t,"width",s),Y(t,"height",i),Y(a,"display","none")},m(w,y){k(w,t,y),e[64](t),k(w,u,y),k(w,a,y),g&&g.m(a,null),e[65](a),l=!0,h||(d=[c(t,"touchstart",ue(function(){b(e[3]?e[9]:null)&&(e[3]?e[9]:null).apply(this,arguments)})),c(t,"mousemove",function(){b(e[3]?e[8]:null)&&(e[3]?e[8]:null).apply(this,arguments)}),c(t,"pointermove",function(){b(e[3]?e[8]:null)&&(e[3]?e[8]:null).apply(this,arguments)}),c(t,"click",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"contextmenu",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"dblclick",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"mousedown",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"mouseenter",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"mouseleave",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"mouseup",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"wheel",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"touchcancel",ue(function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)})),c(t,"touchend",ue(function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)})),c(t,"touchmove",ue(function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)})),c(t,"pointerenter",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"pointerleave",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"pointerdown",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"pointerup",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"pointercancel",function(){b(e[3]?e[10]:null)&&(e[3]?e[10]:null).apply(this,arguments)}),c(t,"focus",e[19]),c(t,"blur",e[20]),c(t,"fullscreenchange",e[21]),c(t,"fullscreenerror",e[22]),c(t,"scroll",e[23]),c(t,"cut",e[24]),c(t,"copy",e[25]),c(t,"paste",e[26]),c(t,"keydown",e[27]),c(t,"keypress",e[28]),c(t,"keyup",e[29]),c(t,"auxclick",e[30]),c(t,"click",e[31]),c(t,"contextmenu",e[32]),c(t,"dblclick",e[33]),c(t,"mousedown",e[34]),c(t,"mouseenter",e[35]),c(t,"mouseleave",e[36]),c(t,"mousemove",e[37]),c(t,"mouseover",e[38]),c(t,"mouseout",e[39]),c(t,"mouseup",e[40]),c(t,"select",e[41]),c(t,"wheel",e[42]),c(t,"drag",e[43]),c(t,"dragend",e[44]),c(t,"dragenter",e[45]),c(t,"dragstart",e[46]),c(t,"dragleave",e[47]),c(t,"dragover",e[48]),c(t,"drop",e[49]),c(t,"touchcancel",e[50]),c(t,"touchend",e[51]),c(t,"touchmove",e[52]),c(t,"touchstart",e[53]),c(t,"pointerover",e[54]),c(t,"pointerenter",e[55]),c(t,"pointerdown",e[56]),c(t,"pointermove",e[57]),c(t,"pointerup",e[58]),c(t,"pointercancel",e[59]),c(t,"pointerout",e[60]),c(t,"pointerleave",e[61]),c(t,"gotpointercapture",e[62]),c(t,"lostpointercapture",e[63])],h=!0)},p(w,y){e=w,(!l||y[0]&33&&n!==(n=e[0]*e[5]))&&P(t,"width",n),(!l||y[0]&34&&r!==(r=e[1]*e[5]))&&P(t,"height",r),(!l||y[0]&16)&&P(t,"class",e[4]),(!l||y[0]&4)&&P(t,"style",e[2]);const I=y[0]&4;I&&Y(t,"display","block"),(I||y[0]&5&&s!==(s=`${e[0]}px`))&&Y(t,"width",s),(I||y[0]&6&&i!==(i=`${e[1]}px`))&&Y(t,"height",i),g&&g.p&&(!l||y[0]&131072)&&Ce(g,f,e,e[17],l?Pe(f,e[17],y,null):Se(e[17]),null)},i(w){l||(M(g,w),l=!0)},o(w){E(g,w),l=!1},d(w){w&&(q(t),q(u),q(a)),e[64](null),g&&g.d(w),e[65](null),h=!1,ne(d)}}}const ke=Symbol(),ln=()=>Yt(ke);function hn(e,t,n){let r,{$$slots:s={},$$scope:i}=t,{width:u=640,height:a=640,pixelRatio:l=null,style:h="",autoclear:d=!0,layerEvents:f=!1}=t,{class:g=""}=t,w,y=null,I;const v=new en;function p(){v.redraw()}function X(){return w}function N(){return y}l==null&&(typeof window<"u"?l=window.devicePixelRatio:l=2),Xt(ke,{register:v.register,unregister:v.unregister,redraw:v.redraw}),Oe(()=>{const o=w.getContext("2d");f?(y=an(o),y._renderingLayerId=v.getRenderingLayerId):y=o,v.setup(y,I)}),be(()=>v.destroy());const F=o=>{const we=o.offsetX*r,ge=o.offsetY*r,ye=y._getLayerIdAtPixel(we,ge);v.setActiveLayer(ye,o),v.dispatchLayerEvent(o)},Q=o=>{const{clientX:we,clientY:ge}=o.changedTouches[0],{left:ye,top:Rt}=w.getBoundingClientRect(),It=(we-ye)*r,At=(ge-Rt)*r,Pt=y._getLayerIdAtPixel(It,At);v.setActiveLayer(Pt,o),v.dispatchLayerEvent(o)},se=o=>{window.TouchEvent&&o instanceof TouchEvent&&o.preventDefault(),v.dispatchLayerEvent(o)};function ie(o){m.call(this,e,o)}function B(o){m.call(this,e,o)}function oe(o){m.call(this,e,o)}function fe(o){m.call(this,e,o)}function ae(o){m.call(this,e,o)}function me(o){m.call(this,e,o)}function Fe(o){m.call(this,e,o)}function Xe(o){m.call(this,e,o)}function Ye(o){m.call(this,e,o)}function Ne(o){m.call(this,e,o)}function Be(o){m.call(this,e,o)}function We(o){m.call(this,e,o)}function Ue(o){m.call(this,e,o)}function xe(o){m.call(this,e,o)}function He(o){m.call(this,e,o)}function Ke(o){m.call(this,e,o)}function Ge(o){m.call(this,e,o)}function Je(o){m.call(this,e,o)}function Qe(o){m.call(this,e,o)}function Ze(o){m.call(this,e,o)}function $e(o){m.call(this,e,o)}function et(o){m.call(this,e,o)}function tt(o){m.call(this,e,o)}function nt(o){m.call(this,e,o)}function rt(o){m.call(this,e,o)}function st(o){m.call(this,e,o)}function it(o){m.call(this,e,o)}function ot(o){m.call(this,e,o)}function at(o){m.call(this,e,o)}function ut(o){m.call(this,e,o)}function lt(o){m.call(this,e,o)}function ht(o){m.call(this,e,o)}function ct(o){m.call(this,e,o)}function dt(o){m.call(this,e,o)}function ft(o){m.call(this,e,o)}function mt(o){m.call(this,e,o)}function wt(o){m.call(this,e,o)}function gt(o){m.call(this,e,o)}function yt(o){m.call(this,e,o)}function pt(o){m.call(this,e,o)}function vt(o){m.call(this,e,o)}function _t(o){m.call(this,e,o)}function bt(o){m.call(this,e,o)}function Mt(o){m.call(this,e,o)}function Et(o){m.call(this,e,o)}function Lt(o){J[o?"unshift":"push"](()=>{w=o,n(6,w)})}function zt(o){J[o?"unshift":"push"](()=>{I=o,n(7,I)})}return e.$$set=o=>{"width"in o&&n(0,u=o.width),"height"in o&&n(1,a=o.height),"pixelRatio"in o&&n(11,l=o.pixelRatio),"style"in o&&n(2,h=o.style),"autoclear"in o&&n(12,d=o.autoclear),"layerEvents"in o&&n(3,f=o.layerEvents),"class"in o&&n(4,g=o.class),"$$scope"in o&&n(17,i=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&2048&&n(5,r=l??1),e.$$.dirty[0]&1&&n(16,v.width=u,v),e.$$.dirty[0]&2&&n(16,v.height=a,v),e.$$.dirty[0]&32&&n(16,v.pixelRatio=r,v),e.$$.dirty[0]&4096&&n(16,v.autoclear=d,v),e.$$.dirty[0]&71683&&v.redraw()},[u,a,h,f,g,r,w,I,F,Q,se,l,d,p,X,N,v,i,s,ie,B,oe,fe,ae,me,Fe,Xe,Ye,Ne,Be,We,Ue,xe,He,Ke,Ge,Je,Qe,Ze,$e,et,tt,nt,rt,st,it,ot,at,ut,lt,ht,ct,dt,ft,mt,wt,gt,yt,pt,vt,_t,bt,Mt,Et,Lt,zt]}class cn extends V{constructor(t){super(),T(this,t,hn,un,D,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function dn(e){let t;return{c(){t=G("div"),P(t,"data-layer-id",e[0])},m(n,r){k(n,t,r)},p:O,i:O,o:O,d(n){n&&q(t)}}}function fn(e,t,n){const{register:r,unregister:s,redraw:i}=ln(),u=Ft();let{setup:a=void 0}=t,{render:l=()=>{}}=t;const h=r({setup:a,render:l,dispatcher:u});return be(()=>s(h)),e.$$set=d=>{"setup"in d&&n(1,a=d.setup),"render"in d&&n(2,l=d.render)},e.$$.update=()=>{e.$$.dirty&4&&i()},[h,a,l]}class de extends V{constructor(t){super(),T(this,t,fn,dn,D,{setup:1,render:2})}}let ze;const Te=Date.now(),Ve=e=>(e(Date.now()-Te),ze=window.requestAnimationFrame(()=>Ve(e)),()=>window.cancelAnimationFrame(ze));function mn(){}Gt(Date.now()-Te,typeof window>"u"?mn:Ve);getComputedStyle(document.body).getPropertyValue("background-color");function wn(e){let t;const n=e[4].default,r=Ie(n,e,e[6],null);return{c(){r&&r.c()},m(s,i){r&&r.m(s,i),t=!0},p(s,i){r&&r.p&&(!t||i&64)&&Ce(r,n,s,s[6],t?Pe(n,s[6],i,null):Se(s[6]),null)},i(s){t||(M(r,s),t=!0)},o(s){E(r,s),t=!1},d(s){r&&r.d(s)}}}function gn(e){let t,n,r,s,i;return he(e[5]),n=new cn({props:{width:e[0],height:e[1],$$slots:{default:[wn]},$$scope:{ctx:e}}}),{c(){t=G("div"),C(n.$$.fragment),P(t,"class","svelte-jnkp5j")},m(u,a){k(u,t,a),z(n,t,null),r=!0,s||(i=c(window,"resize",e[5]),s=!0)},p(u,[a]){const l={};a&1&&(l.width=u[0]),a&2&&(l.height=u[1]),a&64&&(l.$$scope={dirty:a,ctx:u}),n.$set(l)},i(u){r||(M(n.$$.fragment,u),r=!0)},o(u){E(n.$$.fragment,u),r=!1},d(u){u&&q(t),R(n),s=!1,i()}}}function yn(e,t,n){let{$$slots:r={},$$scope:s}=t,{width:i=0}=t,{height:u=0}=t,a,l;function h(){n(2,a=window.innerWidth),n(3,l=window.innerHeight)}return e.$$set=d=>{"width"in d&&n(0,i=d.width),"height"in d&&n(1,u=d.height),"$$scope"in d&&n(6,s=d.$$scope)},e.$$.update=()=>{e.$$.dirty&4&&n(0,i=a-17),e.$$.dirty&8&&n(1,u=l-17)},[i,u,a,l,r,h,s]}class pn extends V{constructor(t){super(),T(this,t,yn,gn,D,{width:0,height:1})}}function vn(e){let t,n;return t=new de({props:{render:e[0]}}),{c(){C(t.$$.fragment)},m(r,s){z(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.render=r[0]),t.$set(i)},i(r){n||(M(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function _n(e,t,n){let{x:r}=t,{y:s}=t,i;return e.$$set=u=>{"x"in u&&n(1,r=u.x),"y"in u&&n(2,s=u.y)},e.$$.update=()=>{e.$$.dirty&6&&n(0,i=({context:u,width:a,height:l})=>{u.fillStyle="white",u.beginPath(),u.arc(r,s,7,0,2*Math.PI),u.fill()})},[i,r,s]}class bn extends V{constructor(t){super(),T(this,t,_n,vn,D,{x:1,y:2})}}let je=300;function Mn(e){let t,n;return t=new de({props:{render:e[0]}}),{c(){C(t.$$.fragment)},m(r,s){z(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.render=r[0]),t.$set(i)},i(r){n||(M(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function En(e,t,n){let r;return n(0,r=({context:s,width:i,height:u})=>{s.strokeStyle="white",s.beginPath(),s.arc(i/2,u/2,je,2,Math.PI*3),s.stroke()}),[r]}class Ln extends V{constructor(t){super(),T(this,t,En,Mn,D,{})}}function zn(e){let t,n;return t=new de({props:{render:e[0]}}),{c(){C(t.$$.fragment)},m(r,s){z(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.render=r[0]),t.$set(i)},i(r){n||(M(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Rn(e,t,n){let r;ce(e,j,a=>n(3,r=a));let{x:s}=t,{y:i}=t,u;return e.$$set=a=>{"x"in a&&n(1,s=a.x),"y"in a&&n(2,i=a.y)},e.$$.update=()=>{e.$$.dirty&14&&n(0,u=({context:a,width:l,height:h})=>{a.strokeStyle="white",a.beginPath(),a.moveTo(r.screenMiddle.x,r.screenMiddle.y),a.lineTo(s,i),a.lineWidth=2,a.stroke()})},[u,s,i,r]}class In extends V{constructor(t){super(),T(this,t,Rn,zn,D,{x:1,y:2})}}var An=Object.defineProperty,Pn=(e,t,n)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t,n)=>(Pn(e,typeof t!="symbol"?t+"":t,n),n);class A{constructor(t,n,r){K(this,"_rows"),K(this,"_columns"),K(this,"_values"),this._rows=Math.max(t,1),this._columns=Math.max(n,1),this._values=new Array(this._rows).fill([]).map(()=>new Array(this._columns).fill(0)),r&&(this.values=r)}get rows(){return this._rows}get columns(){return this._columns}get values(){return this._values}set values(t){const n=Math.min(t.length,this.rows),r=Math.min(t[0].length,this.columns);for(let s=0;s<n;s++)for(let i=0;i<r;i++)this.values[s][i]=t[s][i]}at(t,n){return this.values[t][n]}reset(){this.values=this.values.map(t=>t.map(()=>0))}addAColumn(){return new A(this.rows,this.columns+1,this.values)}addARow(){return new A(this.rows+1,this.columns,this.values)}equals(t){return this.rows===t.rows&&this.columns===t.columns&&this.values.reduce((n,r,s)=>n&&r.reduce((i,u,a)=>i&&t.at(s,a)===u,n),!0)}setAsIdentity(){if(this.rows!==this.columns)throw new Error("Dimension error! The matrix isn't squared!");return this.values.forEach((t,n)=>{t.forEach((r,s)=>{this.values[n][s]=n===s?1:0})}),this}static identity(t){if(t<1)throw Error("Dimension error! Matrix dimension must be positive.");return new A(t,t).setAsIdentity()}multiply(t){if(this.columns!==t.rows)throw new Error("Dimension error! The operand matrix must have the same number of rows as 'this' matrix columns!");const n=new A(this.rows,t.columns);return n.values=n.values.map((r,s)=>r.map((i,u)=>this.values[s].reduce((a,l,h)=>a+l*t.at(h,u),0))),n}indexOf(t){for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)if(this.values[n][r]===t)return[n,r];return[-1,-1]}max(){return this.values.reduce((t,n)=>Math.max(t,...n),-1/0)}min(){return this.values.reduce((t,n)=>Math.min(t,...n),1/0)}round(){return new A(this.rows,this.columns,this.values.map(t=>t.map(n=>Math.round(n))))}determinant(){if(this.rows!==this.columns)throw new Error("Dimension error! The matrix isn't squared!");if(this.rows===this.columns&&this.columns===1)return this.values[0][0];let t=0,n=1;if(this.rows===2)t=this.values[0][0]*this.values[1][1]-this.values[1][0]*this.values[0][1];else for(let r=0;r<this.rows;r++){const s=this.getCofactor(0,r);t+=n*this.at(0,r)*s.determinant(),n=-n}return t}getCofactor(t,n){return new A(this.rows-1,this.columns-1,this.values.filter((r,s)=>s!==t).map(r=>r.filter((s,i)=>i!==n)))}transpose(){return new A(this.columns,this.rows,new Array(this.columns).fill([]).map((t,n)=>new Array(this.rows).fill(0).map((r,s)=>this.at(s,n))))}inverse(){if(this.rows!==this.columns)throw new Error("Dimension error! The matrix isn't squared!");const t=this.determinant();if(t===0)throw new Error("Determinant is 0, can't compute inverse.");const n=new A(this.rows,this.columns,this.values.map((r,s)=>r.map((i,u)=>Math.pow(-1,s+u)*this.getCofactor(s,u).determinant()))).transpose();return new A(this.rows,this.columns,this.values.map((r,s)=>r.map((i,u)=>n.at(s,u)/t)))}toString(){return`[${this.values.map(t=>`[${t.join(", ")}]`).join(`,
`)}]`}}class L{constructor(t){K(this,"_values"),this._values=new Array((t||[0]).length).fill(0),t&&(this.values=t)}get rows(){return this.values.length}get values(){return this._values}set values(t){const n=Math.min(this.values.length,t.length);for(let r=0;r<n;r++)this.values[r]=t[r]}angleFrom(t){if(this.rows!==t.rows)throw new Error("To calculate the angle, vectors must have the same dimension!");const n=this.dot(t)/(this.length()*t.length());return Math.acos(n)}distanceFrom(t){if(this.rows!==t.rows)throw new Error("To calculate the distance, vectors must have the same dimension!");return this.subtract(t).length()}at(t){return this.values[t]}indexOf(t){return this.values.indexOf(t)}reset(){this.values=this.values.fill(0)}addAValue(){return this.values.push(0),new L(this.values)}equals(t){return this.rows===t.rows&&this.values.reduce((n,r,s)=>n&&t.at(s)===r,!0)}negate(){return new L(this.values.map(t=>-t))}length(){return Math.sqrt(this.squaredLength())}squaredLength(){return this.dot(this)}add(t){if(this.rows!==t.rows)throw new Error("Vectors don't have the same dimension!");return this.operateOnAllValues((n,r)=>n+t.at(r))}subtract(t){if(this.rows!==t.rows)throw new Error("Vectors don't have the same dimension!");return this.operateOnAllValues((n,r)=>n-t.at(r))}multiply(t){if(this.rows!==t.rows)throw new Error("Vectors don't have the same dimension!");return this.operateOnAllValues((n,r)=>n*t.at(r))}divide(t){if(this.rows!==t.rows)throw new Error("Vectors don't have the same dimension!");return this.operateOnAllValues((n,r)=>t.at(r)===0?n:n/t.at(r))}max(){if(this.rows===0)throw new Error("Cannot get the maximum value of an empty vector!");return Math.max(...this.values)}min(){if(this.rows===0)throw new Error("Cannot get the minimum value of an empty vector!");return Math.min(...this.values)}round(){if(this.rows===0)throw new Error("Cannot round an empty vector!");return this.operateOnAllValues(t=>Math.round(t))}scale(t){return this.operateOnAllValues(n=>n*t)}operateOnAllValues(t){return new L(this.values.map(t))}normalize(){const t=this.length();return this.operateOnAllValues(n=>n/t)}dot(t){return this.values.reduce((n,r,s)=>n+r*t.at(s),0)}cross(t){if(this.rows<3||t.rows<3)throw new Error("Cross product is possible on 3D vectors only");const n=new Array(3);return n[0]=this.at(1)*t.at(2)-this.at(2)*t.at(1),n[1]=this.at(2)*t.at(0)-this.at(0)*t.at(2),n[2]=this.at(0)*t.at(1)-this.at(1)*t.at(0),new L(n)}mix(t,n){return new L(this.values.map((r,s)=>r+n*(t.at(s)-r)))}static get360angle(t,n){if(t.rows!==3||n.rows!==3)throw new Error("Vectors must be in 3D!. You can add a 1 dimension if it is missing.");return-Math.atan2(n.cross(t).dot(new L([0,0,1]).normalize()),t.dot(n))}toString(){return`[${this.values.join(", ")}]`}}const Cn=1e-5,S=class{constructor(e){K(this,"values",new Float32Array(4)),e!==void 0&&(this.xyzw=e)}get x(){return this.values[0]}set x(e){this.values[0]=e}get y(){return this.values[1]}set y(e){this.values[1]=e}get z(){return this.values[2]}set z(e){this.values[2]=e}get w(){return this.values[3]}set w(e){this.values[3]=e}get xy(){return[this.values[0],this.values[1]]}set xy(e){this.values[0]=e[0],this.values[1]=e[1]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}set xyz(e){this.values[0]=e[0],this.values[1]=e[1],this.values[2]=e[2]}get xyzw(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set xyzw(e){this.values[0]=e[0],this.values[1]=e[1],this.values[2]=e[2],this.values[3]=e[3]}at(e){return this.values[e]}reset(){for(let e=0;e<4;e++)this.values[e]=0}copy(e){e||(e=new S);for(let t=0;t<4;t++)e.values[t]=this.values[t];return e}roll(){const e=this.x,t=this.y,n=this.z,r=this.w;return Math.atan2(2*(e*t+r*n),r*r+e*e-t*t-n*n)}pitch(){const e=this.x,t=this.y,n=this.z,r=this.w;return Math.atan2(2*(t*n+r*e),r*r-e*e-t*t+n*n)}yaw(){return Math.asin(2*(this.x*this.z-this.w*this.y))}equals(e,t=Cn){for(let n=0;n<4;n++)if(Math.abs(this.values[n]-e.at(n))>t)return!1;return!0}setIdentity(){return this.x=0,this.y=0,this.z=0,this.w=1,this}calculateW(){const e=this.x,t=this.y,n=this.z;return this.w=-Math.sqrt(Math.abs(1-e*e-t*t-n*n)),this}inverse(){const e=S.dot(this,this);if(!e)return this.xyzw=[0,0,0,0],this;const t=e?1/e:0;return this.x*=-t,this.y*=-t,this.z*=-t,this.w*=t,this}conjugate(){return this.values[0]*=-1,this.values[1]*=-1,this.values[2]*=-1,this}length(){const e=this.x,t=this.y,n=this.z,r=this.w;return Math.sqrt(e*e+t*t+n*n+r*r)}normalize(e){e||(e=this);const t=this.x,n=this.y,r=this.z,s=this.w;let i=Math.sqrt(t*t+n*n+r*r+s*s);return i?(i=1/i,e.x=t*i,e.y=n*i,e.z=r*i,e.w=s*i,e):(e.x=0,e.y=0,e.z=0,e.w=0,e)}add(e){for(let t=0;t<4;t++)this.values[t]+=e.at(t);return this}multiply(e){const t=this.values[0],n=this.values[1],r=this.values[2],s=this.values[3],i=e.x,u=e.y,a=e.z,l=e.w;return this.x=t*l+s*i+n*a-r*u,this.y=n*l+s*u+r*i-t*a,this.z=r*l+s*a+t*u-n*i,this.w=s*l-t*i-n*u-r*a,this}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}static sum(e,t){const n=new S;return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n}static product(e,t){const n=new S,r=e.x,s=e.y,i=e.z,u=e.w,a=t.x,l=t.y,h=t.z,d=t.w;return n.x=r*d+u*a+s*h-i*l,n.y=s*d+u*l+i*a-r*h,n.z=i*d+u*h+r*l-s*a,n.w=u*d-r*a-s*l-i*h,n}static cross(e,t){const n=new S,r=e.x,s=e.y,i=e.z,u=e.w,a=t.x,l=t.y,h=t.z,d=t.w;return n.x=u*h+i*d+r*l-s*a,n.y=u*d-r*a-s*l-i*h,n.z=u*a+r*d+s*h-i*l,n.w=u*l+s*d+i*a-r*h,n}static shortMix(e,t,n){const r=new S;if(n<=0)return r.xyzw=e.xyzw,r;if(n>=1)return r.xyzw=t.xyzw,r;let s=S.dot(e,t);const i=t.copy();s<0&&(i.inverse(),s=-s);let u,a;if(s>.9999)u=1-n,a=0+n;else{const l=Math.sqrt(1-s*s),h=Math.atan2(l,s),d=1/l;u=Math.sin((1-n)*h)*d,a=Math.sin((0+n)*h)*d}return r.x=u*e.x+a*i.x,r.y=u*e.y+a*i.y,r.z=u*e.z+a*i.z,r.w=u*e.w+a*i.w,r}static mix(e,t,n){const r=new S,s=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;if(Math.abs(s)>=1)return r.xyzw=e.xyzw,r;const i=Math.acos(s),u=Math.sqrt(1-s*s);if(Math.abs(u)<.001)return r.x=e.x*.5+t.x*.5,r.y=e.y*.5+t.y*.5,r.z=e.z*.5+t.z*.5,r.w=e.w*.5+t.w*.5,r;const a=Math.sin((1-n)*i)/u,l=Math.sin(n*i)/u;return r.x=e.x*a+t.x*l,r.y=e.y*a+t.y*l,r.z=e.z*a+t.z*l,r.w=e.w*a+t.w*l,r}static fromAxisAngle(e,t){if(e.rows!==3)throw new Error("The axis vector must be in 3D!");const n=new S;t*=.5;const r=Math.sin(t);return n.x=e.at(0)*r,n.y=e.at(1)*r,n.z=e.at(2)*r,n.w=Math.cos(t),n}};let Sn=S;K(Sn,"identity",new S().setIdentity());function On(e){let t,n;return t=new de({props:{render:e[0]}}),{c(){C(t.$$.fragment)},m(r,s){z(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.render=r[0]),t.$set(i)},i(r){n||(M(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function qn(e,t,n){let r,s,i;ce(e,j,l=>n(3,i=l));let u;function a(l,h,d){const f=Math.cos(h),g=Math.sin(h),w=1-f,y=l.at(0),I=l.at(1),v=l.at(2),p=d.normalize(),X=new A(3,3,[[w*p.at(0)*p.at(0)+f,w*p.at(0)*p.at(1)-g*p.at(2),w*p.at(0)*p.at(2)+g*p.at(1)],[w*p.at(0)*p.at(1)+g*p.at(2),w*p.at(1)*p.at(1)+f,w*p.at(1)*p.at(2)-g*p.at(0)],[w*p.at(0)*p.at(2)-g*p.at(1),w*p.at(1)*p.at(2)+g*p.at(0),w*p.at(2)*p.at(2)+f]]),N=new A(3,1,[[y],[I],[v]]),F=X.multiply(N);return new L([F.at(0,0),F.at(1,0),F.at(2,0)])}return e.$$.update=()=>{e.$$.dirty&8&&n(1,r=new L([Math.cos(i.angle),Math.sin(i.angle),0])),e.$$.dirty&8&&n(2,s=i.radius/je*Math.PI),e.$$.dirty&6&&n(0,u=({context:l,width:h,height:d})=>{const f=new L([h/2,d/2,0]),g=64,w=32,y=200,I=80,v=1.5,p=new L([1,0,0]);for(let X=0;X<g;X++){const N=X/g*Math.PI*2,F=new L([Math.cos(N),Math.sin(N),0]);for(let Q=0;Q<w;Q++){const se=Q/w*Math.PI*2,ie=F.scale(Math.sin(se)).add(new L([0,0,Math.cos(se)*v]));let B=ie.scale(I).add(F.scale(y));B=a(B,s,r);const oe=B.add(f),fe=.75+.25*p.dot(ie),ae=.6,me=Math.min(1,1-ae-B.at(2)/y*ae/2);l.fillStyle=`rgba(255, 255, 255, ${fe*me})`,l.fillRect(oe.at(0),oe.at(1),5,5)}}})},[u,r,s,i]}class Dn extends V{constructor(t){super(),T(this,t,qn,On,D,{})}}function kn(e){let t,n,r,s,i,u,a,l;return t=new bn({props:{x:e[2].mousePosition.x,y:e[2].mousePosition.y}}),r=new Ln({}),i=new In({props:{x:e[2].mousePosition.x,y:e[2].mousePosition.y}}),a=new Dn({}),{c(){C(t.$$.fragment),n=$(),C(r.$$.fragment),s=$(),C(i.$$.fragment),u=$(),C(a.$$.fragment)},m(h,d){z(t,h,d),k(h,n,d),z(r,h,d),k(h,s,d),z(i,h,d),k(h,u,d),z(a,h,d),l=!0},p(h,d){const f={};d&4&&(f.x=h[2].mousePosition.x),d&4&&(f.y=h[2].mousePosition.y),t.$set(f);const g={};d&4&&(g.x=h[2].mousePosition.x),d&4&&(g.y=h[2].mousePosition.y),i.$set(g)},i(h){l||(M(t.$$.fragment,h),M(r.$$.fragment,h),M(i.$$.fragment,h),M(a.$$.fragment,h),l=!0)},o(h){E(t.$$.fragment,h),E(r.$$.fragment,h),E(i.$$.fragment,h),E(a.$$.fragment,h),l=!1},d(h){h&&(q(n),q(s),q(u)),R(t,h),R(r,h),R(i,h),R(a,h)}}}function Tn(e){let t,n,r,s,i,u,a;n=new $t({});function l(f){e[3](f)}function h(f){e[4](f)}let d={$$slots:{default:[kn]},$$scope:{ctx:e}};return e[0]!==void 0&&(d.width=e[0]),e[1]!==void 0&&(d.height=e[1]),s=new pn({props:d}),J.push(()=>Le(s,"width",l)),J.push(()=>Le(s,"height",h)),{c(){t=G("div"),C(n.$$.fragment),r=$(),C(s.$$.fragment),P(t,"id","app")},m(f,g){k(f,t,g),z(n,t,null),kt(t,r),z(s,t,null),a=!0},p(f,[g]){const w={};g&36&&(w.$$scope={dirty:g,ctx:f}),!i&&g&1&&(i=!0,w.width=f[0],Ee(()=>i=!1)),!u&&g&2&&(u=!0,w.height=f[1],Ee(()=>u=!1)),s.$set(w)},i(f){a||(M(n.$$.fragment,f),M(s.$$.fragment,f),a=!0)},o(f){E(n.$$.fragment,f),E(s.$$.fragment,f),a=!1},d(f){f&&q(t),R(n),R(s)}}}function Vn(e,t,n){let r;ce(e,j,l=>n(2,r=l));let s,i;function u(l){s=l,n(0,s)}function a(l){i=l,n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&Z(j,r.screenMiddle={x:s/2,y:i/2},r)},[s,i,r,u,a]}class jn extends V{constructor(t){super(),T(this,t,Vn,Tn,D,{})}}new jn({target:document.body});
